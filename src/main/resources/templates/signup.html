<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Keyboard Arena</title>
</head>
<body>
<h2>회원가입</h2>
<form id="signupForm">
    <label for="userId">아이디</label>
    <input type="text" id="userId" name="userId" required><br><br>

    <label for="password">비밀번호</label>
    <input type="password" id="password" name="password" required><br><br>

    <label for="findPwQuestion">비밀번호 확인 질문</label>
    <input type="text" id="findPwQuestion" name="findPwQuestion" required><br><br>

    <label for="findPw">비밀번호 확인 답</label>
    <input type="text" id="findPw" name="findPw" required><br><br>

    <label for="nickname">유저네임</label>
    <input type="text" id="nickname" name="nickname" required><br><br>

    <label for="email">이메일</label>
    <input type="email" id="email" name="email" required><br><br>

    <button id="signupBtn" type="button">회원가입</button>
</form>

<!--<script src="/static/js/signup.js"></script>-->
<script>
    const signUpBtn = document.querySelector("#signupBtn");
    signUpBtn.addEventListener("click", () => {
        signup();
    })
    function signup() {
        var formData = {
            userId: document.getElementById("userId").value,
            password: document.getElementById("password").value,
            nickname: document.getElementById("nickname").value,
            email: document.getElementById("email").value,
            findPwQuestion: document.getElementById("findPwQuestion").value,
            findPw: document.getElementById("findPw").value
        };

        fetch('/user', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(formData)
        })
            .then(response => {
                if (response.ok) {
                    alert('회원가입이 완료되었습니다.');
                    window.location.href = '/login'; // 회원가입 완료 후 로그인 페이지로 이동
                } else {

                    throw new Error('회원가입에 실패했습니다.');
                }
            })
            .catch(error => {
                console.error('Error:', error);
                alert('회원가입에 실패했습니다.');
            });
    }
</script>
</body>
</html>
