<!doctype html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title th:text="${post.title}"></title>

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="/css/freeboard/UpdateAndViewFreeBoardDetail.css">
    <link rel="stylesheet" type="text/css" href="/css/common/LikeComment.css">
    <link rel="stylesheet" type="text/css" href="/css/common/LikeComment.css" th:href="@{/css/common/LikeComment.css}">
    <script defer src="/js/freeboard/FreeBoard.js"></script>
    <script defer src="/js/LikeComment.js"></script>
    <script defer src="/js/common/LogoutBtn.js"></script>
</head>
<body>
<header>
    <!-- 공통 헤더 start ======> -->
    <div class="p-5 mb-5 text-center</> bg-light">
        <!-- flex 적용을 위한 컨테이너 -->
        <div class="title-navbar-container">
            <!--서비스 이름-->
            <h1 class="mb-3" onclick="location.href='/'">Keyboard Arena</h1>
            <!-- 탑 네비게이션 바 -->
            <div class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="navbar-text" id="navbar-nickname" th:text="${post.userTopBarInfo.nickname} + '&nbsp;&nbsp;'"></div>
                <div class="navbar-text" th:text="'Rank: ' + ${post.userTopBarInfo.rank} + '&nbsp;&nbsp;'"></div>
                <div class="navbar-text" th:text="'Points: ' + ${post.userTopBarInfo.point} + '&nbsp;&nbsp;'"></div>
                <button type="button" class="btn btn-primary" onclick="location.href='/mypage'" >마이페이지</button>
                <button type="button" class="btn btn-secondary" id="logoutButton">로그아웃</button>
            </div>
        </div>
        <h4 class="mb-3">다른 사람들과 타자 속도를 겨뤄보세요</h4>
    </div>
</header>
<main class="main-container">
    <div class="main-container-content">
        <h2 th:text="${post.title}"></h2>
        <p th:text="${post.writerNickname}"></p>
        <p th:text="${post.writerRank}"></p>
        <p th:text="${post.boardRank}"></p><br>
        <p th:if="${post.updatedDate} != null and ${post.updatedDate} != ${post.createdDate}" class="edited">edited</p>
        <p th:if="${post.updatedDate} != null and ${post.updatedDate} != ${post.createdDate}" th:text="${#temporals.format(post.updatedDate,'yyyy-MM-dd/ HH:mm:ss')}" class="updated-date"></p>
        <p th:if="${post.updatedDate} == null or ${post.updatedDate} == ${post.createdDate}" th:text="${#temporals.format(post.createdDate,'yyyy-MM-dd/ HH:mm:ss')}" class="created-date"></p>
        <input type="hidden" th:value="${loggedInId}" id="logged-in-id">
        <div class="edit-buttons">
            <button th:if="${loggedInId}==${post.writerId} and ${loggedInId}!=''" class="white-btn edit">edit</button>
            <button th:if="${loggedInId}==${post.writerId}" id="delete-freeboard-button" class="white-btn">delete</button>
            <input type="hidden" id="board-id" th:value="${post.boardId}">
        </div>

        <textarea name="content" id="" cols="100" rows="5" th:text="${post.content}" readonly></textarea>
    </div>
    <button class="like-button"><img src="/media/like.svg" alt="좋아요 클릭" width="42"></button>

    <span th:text="${post.likes}"></span>

    <a href="/board">뒤로가기</a>
</main>

<article class = "container mt-5">
    <label for="write-comment"></label>
    <textarea name="writeComment" class="form-control" id="write-comment" cols="20" rows="5"></textarea>
    <div class="comment-nav-bar">
        <button  id="commit-comment" class="btn btn-outline-secondary" >댓글등록</button>
        <span th:text="'댓글 수: ' + ${post.comments}"></span>
    </div>
    <ul th:each="comment : ${post.commentResponses}" class="list-group">
        <li th:if="${comment.commentId != null}" class="list-group-item">
            <span th:text = "${comment.nickname}" class ="comment-writer"></span>
            <span th:text = "'Rank '+${comment.writerRank}" class ="comment-writer-rank"></span>
            <button th:if="${post.userTopBarInfo.id}==${comment.writerId}" class="delete-comment" th:attr="comment-id=${comment.commentId}">댓글삭제</button>
            <br>
            <span th:text = " ${comment.content}" class ="comment-content"></span>
            <br>
            <span th:text = " ${comment.createdDate}" class ="comment-created-date"></span>

        </li>
    </ul>
</article>
\

</body>
</html>